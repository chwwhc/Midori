fixed foo := closure() : Unit
{
	var arr : Array<() -> Integer> := [closure() : Integer { return 1; }, closure() : Integer { return 1; }, closure() : Integer { return 1; }];
	for (var i : Integer := 0; i < 3; i = i + 1)
	{
		(closure(fixed i : Integer) : Unit
		{
			arr[i] = closure() : Integer
			{
				return i;
			};
			return #;
		})(i);
	}

	PrintLine(arr[0]());  // Should print 0
	PrintLine(arr[1]());  // Should print 1
	PrintLine(arr[2]());  // Should print 2
	
	return #;
};

fixed main := closure() : Unit
{
	foo();

	return #;
};