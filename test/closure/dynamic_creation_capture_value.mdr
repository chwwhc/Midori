fixed foo = closure()
{
	var arr = [@3];
	for (var i = 0; i < 3; i = i + 1)
	{
		(closure(fixed i)
		{
			arr[i] = closure()
			{
				return i;
			};
			return #;
		})(i);
	}

	PrintLine(arr[0]());  // Should print 0
	PrintLine(arr[1]());  // Should print 1
	PrintLine(arr[2]());  // Should print 2
	
	return #;
};

fixed main = closure()
{
	foo();
	return 0;
};