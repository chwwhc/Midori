fixed foo = fn() : Unit
{
	var arr : Array<() -> Int> = [fn() : Int { return 1; }, fn() : Int { return 1; }, fn() : Int { return 1; }];
	for (var i : Int := 0; i < 3; i = i + 1)
	{
		(fn(fixed i : Int) : Unit
		{
			arr[i] = fn() : Int
			{
				return i;
			};
			return #;
		})(i);
	}

	PrintLine(arr[0]());  // Should print 0
	PrintLine(arr[1]());  // Should print 1
	PrintLine(arr[2]());  // Should print 2
	
	return #;
};

fixed main = fn() : Unit
{
	foo();

	return #;
};