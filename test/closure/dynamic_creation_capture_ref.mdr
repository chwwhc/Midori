fixed foo := closure() : Unit
{
	var arr : Array<() -> Integer> := [closure() : Integer { return 1; }, closure() : Integer { return 1; }, closure() : Integer { return 1; }];
	for (var i : Integer := 0; i < 3; i = i + 1)
	{
		arr[i] = closure() : Integer
		{
			return i;
		};
	}

	PrintLine(arr[0]());  // Should print 3, due to late binding
	PrintLine(arr[1]());  // Should print 3
	PrintLine(arr[2]());  // Should print 3
	
	return #;
};

fixed main := closure() : Unit
{
	foo();
	return #;
};