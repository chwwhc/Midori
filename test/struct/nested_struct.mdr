#include "E:\Projects\Midori\MidoriUtil\MidoriUtil.mdr"

struct Vec3
{
	x : Fraction;
	y : Fraction;
	z : Fraction;
};

struct Complex
{
	real : Fraction;
	img : Fraction;
};

fixed TestNestedStruct = closure() : Unit
{
	struct Test
	{
		x : Integer;
	};

	var test = new Test(1);

	fixed struct_in_closure = closure() : Unit
	{
		struct Test2
		{
			x : Integer;
		};

		closure() : Unit
		{
			struct Test3
			{
				x : Vec3;
				y : Complex;
			};

			var test3 = new Test3(new Vec3(1.2, 2.4, 3.2), new Complex(1.12, 2.22));

			PrintLine(test as Text);
			return PrintLine(test3 as Text);
		}();

		var test2 = new Test2(2);
		return PrintLine(test2 as Text);
	};

	struct_in_closure();

	return ();
};